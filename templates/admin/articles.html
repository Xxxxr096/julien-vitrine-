{% extends "admin/base.html" %} {% set active = "articles" %} {% block content
%}

<div class="card p-7">
  <div class="flex items-start justify-between gap-4 flex-wrap">
    <div>
      <h2 class="font-orbitron font-black text-2xl text-[color:var(--navy)]">
        Articles
      </h2>
      <p class="text-slate-600 text-sm mt-1">
        Créer, publier, supprimer des articles.
      </p>
    </div>
    <a class="btn-cta alt" href="{{ url_for('admin_article_new') }}">
      <i data-lucide="plus" class="w-4 h-4"></i> Ajouter un article
    </a>
  </div>

  <div class="mt-6 overflow-x-auto">
    <table class="w-full text-sm">
      <thead class="text-slate-500">
        <tr>
          <th class="text-left py-3">Titre</th>
          <th class="text-left py-3">Slug</th>
          <th class="text-left py-3">Publié</th>
          <th class="text-left py-3">Date</th>
          <th class="text-right py-3">Actions</th>
        </tr>
      </thead>
      <tbody class="text-slate-700">
        {% for a in articles %}
        <tr class="border-t border-slate-200/70">
          <td class="py-3 font-extrabold text-[color:var(--navy)]">
            {{ a.title }}
          </td>
          <td class="py-3">{{ a.slug }}</td>
          <td class="py-3">
            {% if a.published %}
            <span class="font-bold" style="color: var(--teal)">Oui</span>
            {% else %}
            <span class="font-bold" style="color: var(--brick)">Non</span>
            {% endif %}
          </td>
          <td class="py-3 text-slate-500">
            {{ a.created_at.strftime("%d/%m/%Y") if a.created_at else "" }}
          </td>
          <td class="py-3 text-right">
            <form
              method="POST"
              action="{{ url_for('admin_article_delete', article_id=a.id) }}"
              onsubmit="return confirm('Supprimer cet article ?');"
            >
              <input
                type="hidden"
                name="csrf_token"
                value="{{ csrf_token() }}"
              />
              <button class="btn-cta" type="submit">
                <i data-lucide="trash-2" class="w-4 h-4"></i> Supprimer
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
